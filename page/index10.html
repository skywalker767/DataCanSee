<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>ECharts Map Example</title>
    <script src="https://cdn.jsdelivr.net/npm/jquery"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3-array"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3-geo"></script>

    <style>
        #main {
            width: 800px;
            height: 600px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
    </style>
</head>


<body>
    <div id="navbar-container">
        <!-- 导航栏 -->
    </div>

    <script>
        // 使用 JavaScript 加载导航栏内容
        window.addEventListener('DOMContentLoaded', function () {
            var navbarContainer = document.getElementById('navbar-container');
            var xhr = new XMLHttpRequest();
            xhr.open('GET', './navgeo.html', true);
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    navbarContainer.innerHTML = xhr.responseText;
                }
            };
            xhr.send();
        });
    </script>

    <div id="main" style="width: 1200px; height: 600px;"></div>
    <script>
        var chartDom = document.getElementById('main');
        var myChart = echarts.init(chartDom);
        var option;

        const data = genData(50);
        option = {
            title: {
                text: '2014年-2022年各类情况死亡或受伤人数统计',
                sublink: 'https://www.gunviolencearchive.org/reports',
                left: 'center'
            },
            tooltip: {
                trigger: 'item',
                formatter: '{a} <br/>{b} : {c} ({d}%)'
            },
            legend: {
                type: 'scroll',
                orient: 'vertical',
                right: 10,
                top: 50,
                bottom: 20,
                data: data.legendData
            },
            series: [
                {
                    name: '类别',
                    type: 'pie',
                    radius: '55%',
                    center: ['33%', '50%'],
                    data: data.seriesData,
                    emphasis: {
                        itemStyle: {
                            shadowBlur: 10,
                            shadowOffsetX: 0,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }
            ]
        };
        function genData() {
            const legendData = ['儿童受伤或死亡人数', '青少年受伤或死亡人数', '警察殉职', '作案人被击毙', '因家庭入侵事件受伤或死亡人数', '意外事件导致的受伤或死亡人数', '其他(包括但不限于街头冲突等伤亡因素)'];
            const seriesData = [
                { name: '儿童受伤或死亡人数', value: 7067 },
                { name: '青少年受伤或死亡人数', value: 31395 },
                { name: '警察殉职', value: 3019 },
                { name: '作案人被击毙', value: 19058 },
                { name: '因家庭入侵事件受伤或死亡人数', value: 21420 },
                { name: '意外事件导致的受伤或死亡人数', value: 17544 },
                { name: '其他(包括但不限于街头冲突等伤亡因素)', value: 336585 }
            ];
            return {
                legendData: legendData,
                seriesData: seriesData
            };
        }

        option && myChart.setOption(option);
    </script>

</body>

</html>
