<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0" /> -->
    <title>动态折线图</title>
    <link rel="stylesheet" href="../static/css/btn.css">
    <link rel="stylesheet" href="../static/css/style3.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3-array"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3-geo"></script>
    <link rel="shortcut icon" href="favicon.ico" />
    <style>
        #main {
            width: 800px;
            height: 600px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
    </style>
</head>

<body>
    <header>
        <li class="logo" alt="logo">数据可视化</li>
        <nav>
            <ul class="nav_links">
                <li><a href="../index.html">首页</a></li>
                <li><a href="retu2.html">热力图</a></li>
                <li><a href="index9.html">动态折线图</a></li>
                <li><a href="index6.html">柱状图</a></li>
                <li><a href="index3.html">折线图</a></li>
                <li><a href="index10.html">饼图</a></li>
                <li><a href="index8.html">堆叠图</li>
                <li><a href="index13.html">趋势图</li>
            </ul>
        </nav>
        <a href="https://github.com/skywalker767/skywalker767.github.io" class="cta"><button>Code</button></a>
        </head>


        <div id="main" style="width: 800px; height: 400px;"></div>
        <div class="btn-container">
            <button id="switchBtn" class="btn" style="position: fixed;top: 90%;">Change</button>
        </div>
        <script>
            var app = {};
            var chartDom = document.getElementById('main');
            var myChart = echarts.init(chartDom);
            var option;
            var data = [
                {
                    name: '2014',
                    itemStyle: {
                        color: '#f5f5f5',//: '#3c8ab2' // 父节点颜色为较深蓝色
                    },
                    children: [
                        {
                            name: '儿童伤亡',
                            value: 582,
                            itemStyle: {
                                color: '#d9d9e9',//: '#549ec7' // 数值较小，颜色较浅
                            },
                            children: [
                                {
                                    name: '582',
                                    value: 582,
                                    itemStyle: {
                                        color: '#d9d9e9',//: '#549ec7' // 数值较小，颜色较浅
                                    }
                                }
                            ]
                        },
                        {
                            name: '青少年伤亡',
                            value: 2277,
                            itemStyle: {
                                color: '#d9d9e9',//: '#6ab2dd' // 数值较小，颜色较浅
                            },
                            children: [
                                {
                                    name: '2277',
                                    value: 2277,
                                    itemStyle: {
                                        color: '#d9d9e9',//: '#6ab2dd' // 数值较小，颜色较浅
                                    }
                                }
                            ]
                        },
                        {
                            name: '警员殉职',
                            value: 229,
                            itemStyle: {
                                color: '#d9d9e9',//: '#80c7f3' // 数值较小，颜色较浅
                            },
                            children: [
                                {
                                    name: '229',
                                    value: 229,
                                    itemStyle: {
                                        color: '#d9d9e9',//: '#80c7f3' // 数值较小，颜色较浅
                                    }
                                }
                            ]
                        },
                        {
                            name: '嫌疑人被击毙',
                            value: 1851,
                            itemStyle: {
                                color: '#d9d9e9',//: '#3c8ab2' // 数值较大，颜色较深
                            },
                            children: [
                                {
                                    name: '1851',
                                    value: 1851,
                                    itemStyle: {
                                        color: '#d9d9e9',//: '#3c8ab2' // 数值较大，颜色较深
                                    }
                                }
                            ]
                        },
                        {
                            name: '家庭入侵',
                            value: 2476,
                            itemStyle: {
                                color: '#d9d9e9',//: '#3c8ab2' // 数值较大，颜色较深
                            },
                            children: [
                                {
                                    name: '2476',
                                    value: 2476,
                                    itemStyle: {
                                        color: '#d9d9e9',//: '#3c8ab2' // 数值较大，颜色较深
                                    }
                                }
                            ]
                        },
                        {
                            name: '意外伤亡',
                            value: 1647,
                            itemStyle: {
                                color: '#d9d9e9',//: '#3c8ab2' // 数值较大，颜色较深
                            },
                            children: [
                                {
                                    name: '1647',
                                    value: 1647,
                                    itemStyle: {
                                        color: '#d9d9e9',//: '#3c8ab2' // 数值较大，颜色较深
                                    }
                                },
                            ]
                        },
                        {
                            name: '其他因素',
                            value: 25146,
                            itemStyle: {
                                color: '#d9d9e9',//: '#3c8ab2' // 数值较大，颜色较深
                            },
                            children: [
                                {
                                    name: '25146',
                                    value: 25146,
                                    itemStyle: {
                                        color: '#d9d9e9',//: '#3c8ab2' // 数值较大，颜色较深
                                    }
                                },
                            ]
                        }
                    ]

                },
                {
                    name: '2015',
                    itemStyle: {
                        color: '#f5f5f5',//: '#006400' // 父节点颜色为深绿色
                    },
                    children: [
                        {
                            name: '儿童伤亡',
                            value: 679,
                            itemStyle: {
                                color: '#b4b5d4',//: '#007700' // 数值较小，颜色较浅
                            },
                            children: [
                                {
                                    name: '679',
                                    value: 679,
                                    itemStyle: {
                                        color: '#b4b5d4',//: '#007700' // 数值较小，颜色较浅
                                    }
                                }
                            ]
                        },
                        {
                            name: '青少年伤亡',
                            value: 2699,
                            itemStyle: {
                                color: '#b4b5d4',//: '#00A000' // 数值较小，颜色较浅
                            },
                            children: [
                                {
                                    name: '2699',
                                    value: 2699,
                                    itemStyle: {
                                        color: '#b4b5d4',//: '#00A000' // 数值较小，颜色较浅
                                    }
                                }
                            ]
                        },
                        {
                            name: '警员殉职',
                            value: 279,
                            itemStyle: {
                                color: '#b4b5d4',//: '#00C300' // 数值较小，颜色较浅
                            },
                            children: [
                                {
                                    name: '279',
                                    value: 279,
                                    itemStyle: {
                                        color: '#b4b5d4',//: '#00C300' // 数值较小，颜色较浅
                                    }
                                }
                            ]
                        },
                        {
                            name: '嫌疑人被击毙',
                            value: 2044,
                            itemStyle: {
                                color: '#b4b5d4',//: '#006400' // 数值较大，颜色较深
                            },
                            children: [
                                {
                                    name: '2044',
                                    value: 2044,
                                    itemStyle: {
                                        color: '#b4b5d4',//: '#006400' // 数值较大，颜色较深
                                    }
                                }
                            ]
                        },
                        {
                            name: '家庭入侵',
                            value: 2330,
                            itemStyle: {
                                color: '#b4b5d4',//: '#006400' // 数值较大，颜色较深
                            },
                            children: [
                                {
                                    name: '2330',
                                    value: 2330,
                                    itemStyle: {
                                        color: '#b4b5d4',//: '#006400' // 数值较大，颜色较深
                                    }
                                }
                            ]
                        },
                        {
                            name: '意外伤亡',
                            value: 1997,
                            itemStyle: {
                                color: '#b4b5d4',//: '#006400' // 数值较大，颜色较深
                            },
                            children: [
                                {
                                    name: '1997',
                                    value: 1997,
                                    itemStyle: {
                                        color: '#b4b5d4',//: '#006400' // 数值较大，颜色较深
                                    }
                                },
                            ]
                        },
                        {
                            name: '其他因素',
                            value: 30441,
                            itemStyle: {
                                color: '#b4b5d4',//: '#006400' // 数值较大，颜色较深
                            },
                            children: [
                                {
                                    name: '30441',
                                    value: 30441,
                                    itemStyle: {
                                        color: '#b4b5d4',//: '#006400' // 数值较大，颜色较深
                                    }
                                },
                            ]
                        }
                    ]

                },
                {
                    name: '2016',
                    itemStyle: {
                        color: '#f5f5f5',//: '#008000'
                    },
                    children: [
                        {
                            name: '儿童伤亡',
                            value: 665,
                            itemStyle: {
                                color: '#8f92bf',//: '#006400' // 数值较大，颜色较深
                            },
                            children: [
                                {
                                    name: '665',
                                    value: 665,
                                    itemStyle: {
                                        color: '#8f92bf',//: '#006400' // 数值较大，颜色较深
                                    },
                                }
                            ]
                        },
                        {
                            name: '青少年伤亡',
                            value: 3154,
                            itemStyle: {
                                color: '#8f92bf',//: '#006400' // 数值较大，颜色较深
                            },
                            children: [
                                {
                                    name: '3154',
                                    value: 3154,
                                    itemStyle: {
                                        color: '#8f92bf',//: '#006400' // 数值较大，颜色较深
                                    },
                                }
                            ]
                        },
                        {
                            name: '警员殉职',
                            value: 309,
                            children: [
                                {
                                    name: '309',
                                    value: 309,
                                    itemStyle: {
                                        color: '#8f92bf',//: '#006400' // 数值较大，颜色较深
                                    },
                                }
                            ]
                        },
                        {
                            name: '嫌疑人被击毙',
                            value: 2018,
                            itemStyle: {
                                color: '#8f92bf',//: '#006400' // 数值较大，颜色较深
                            },
                            children: [
                                {
                                    name: '2018',
                                    value: 2018,
                                    itemStyle: {
                                        color: '#8f92bf',//: '#006400' // 数值较大，颜色较深
                                    },
                                }
                            ]
                        },
                        {
                            name: '家庭入侵',
                            value: 2566,
                            itemStyle: {
                                color: '#8f92bf',//: '#006400' // 数值较大，颜色较深
                            },
                            children: [
                                {
                                    name: '2566',
                                    value: 2566,
                                    itemStyle: {
                                        color: '#8f92bf',//: '#006400' // 数值较大，颜色较深
                                    },
                                }
                            ]
                        },
                        {
                            name: '意外伤亡',
                            value: 2235,
                            itemStyle: {
                                color: '#8f92bf',//: '#006400' // 数值较大，颜色较深
                            },
                            children: [
                                {
                                    name: '2235',
                                    value: 2235,
                                    itemStyle: {
                                        color: '#8f92bf',//: '#006400' // 数值较大，颜色较深
                                    },
                                }
                            ]
                        },
                        {
                            name: '其他因素',
                            value: 34780,
                            itemStyle: {
                                color: '#8f92bf',//: '#006400' // 数值较大，颜色较深
                            },
                            children: [
                                {
                                    name: '34780',
                                    value: 34780,
                                    itemStyle: {
                                        color: '#8f92bf',//: '#006400' // 数值较大，颜色较深
                                    },
                                },
                            ],
                        },
                    ]

                },
                {
                    name: '2017',
                    itemStyle: {
                        color: '#f5f5f5',//: '#800080' // 紫色
                    },
                    children: [
                        {
                            name: '儿童伤亡',
                            value: 721,
                            itemStyle: {
                                color: '#6a71aa',//: '#006400' // 数值较大，颜色较深
                            },
                            children: [
                                {
                                    name: '721',
                                    value: 721,
                                    itemStyle: {
                                        color: '#6a71aa',//: '#006400' // 数值较大，颜色较深
                                    },
                                }
                            ]
                        },
                        {
                            name: '青少年伤亡',
                            value: 3261,
                            itemStyle: {
                                color: '#6a71aa',//: '#006400' // 数值较大，颜色较深
                            },
                            children: [
                                {
                                    name: '3261',
                                    value: 3261,
                                    itemStyle: {
                                        color: '#6a71aa',//: '#006400' // 数值较大，颜色较深
                                    },
                                }
                            ]
                        },
                        {
                            name: '警员殉职',
                            value: 302,
                            itemStyle: {
                                color: '#6a71aa',//: '#006400' // 数值较大，颜色较深
                            },
                            children: [
                                {
                                    name: '302',
                                    value: 302,
                                    itemStyle: {
                                        color: '#6a71aa',//: '#006400' // 数值较大，颜色较深
                                    },
                                }
                            ]
                        },
                        {
                            name: '嫌疑人被击毙',
                            itemStyle: {
                                color: '#6a71aa',//: '#006400' // 数值较大，颜色较深
                            },
                            value: 2148,
                            children: [
                                {
                                    name: '2148',
                                    value: 2148,
                                    itemStyle: {
                                        color: '#6a71aa',//: '#006400' // 数值较大，颜色较深
                                    },
                                }
                            ]
                        },
                        {
                            name: '家庭入侵',
                            value: 2567,
                            itemStyle: {
                                color: '#6a71aa',//: '#006400' // 数值较大，颜色较深
                            },
                            children: [
                                {
                                    name: '2567',
                                    value: 2567,
                                    itemStyle: {
                                        color: '#6a71aa',//: '#006400' // 数值较大，颜色较深
                                    },
                                }
                            ]
                        },
                        {
                            name: '意外伤亡',
                            value: 2065,
                            itemStyle: {
                                color: '#6a71aa',//: '#006400' // 数值较大，颜色较深
                            },
                            children: [
                                {
                                    name: '2065',
                                    value: 2065,
                                    itemStyle: {
                                        color: '#6a71aa',//: '#006400' // 数值较大，颜色较深
                                    },
                                }
                            ]
                        },
                        {
                            name: '其他因素',
                            value: 36046,
                            itemStyle: {
                                color: '#6a71aa',//: '#006400' // 数值较大，颜色较深
                            },
                            children: [
                                {
                                    name: '36046',
                                    value: 36046,
                                    itemStyle: {
                                        color: '#6a71aa',//: '#006400' // 数值较大，颜色较深
                                    },
                                }
                            ]
                        },
                    ]
                },
                {
                    name: '2018',
                    itemStyle: {
                        color: '#f5f5f5',//: '#FFFF00' // 黄色
                    },
                    children: [
                        {
                            name: '儿童伤亡',
                            value: 663,
                            itemStyle: {
                                color: '#425195',//: '#006400' // 数值较大，颜色较深
                            },
                            children: [
                                {
                                    name: '663',
                                    value: 663,
                                    itemStyle: {
                                        color: '#425195',//: '#006400' // 数值较大，颜色较深
                                    },
                                }
                            ]
                        },
                        {
                            name: '青少年伤亡',
                            value: 2883,
                            itemStyle: {
                                color: '#425195',//: '#006400' // 数值较大，颜色较深
                            },
                            children: [
                                {
                                    name: '2883',
                                    value: 2883,
                                    itemStyle: {
                                        color: '#425195',//: '#006400' // 数值较大，颜色较深
                                    },
                                }
                            ]
                        },
                        {
                            name: '警员殉职',
                            value: 276,
                            itemStyle: {
                                color: '#425195',//: '#006400' // 数值较大，颜色较深
                            },
                            children: [
                                {
                                    name: '276',
                                    value: 276,
                                    itemStyle: {
                                        color: '#425195',//: '#006400' // 数值较大，颜色较深
                                    },
                                }
                            ]
                        },
                        {
                            name: '嫌疑人被击毙',
                            value: 2190,
                            itemStyle: {
                                color: '#425195',//: '#006400' // 数值较大，颜色较深
                            },
                            children: [
                                {
                                    name: '2190',
                                    value: 2190,
                                    itemStyle: {
                                        color: '#425195',//: '#006400' // 数值较大，颜色较深
                                    },
                                }
                            ]
                        },
                        {
                            name: '家庭入侵',
                            value: 1961,
                            itemStyle: {
                                color: '#425195',//: '#006400' // 数值较大，颜色较深
                            },
                            children: [
                                {
                                    name: '1961',
                                    value: 1961,
                                    itemStyle: {
                                        color: '#425195',//: '#006400' // 数值较大，颜色较深
                                    },
                                }
                            ]
                        },
                        {
                            name: '意外伤亡',
                            value: 1696,
                            itemStyle: {
                                color: '#425195',//: '#006400' // 数值较大，颜色较深
                            },
                            children: [
                                {
                                    name: '1696',
                                    value: 1696,
                                    itemStyle: {
                                        color: '#425195',//: '#006400' // 数值较大，颜色较深
                                    },
                                }
                            ]
                        },
                        {
                            name: '其他因素',
                            value: 33564,
                            itemStyle: {
                                color: '#425195',//: '#006400' // 数值较大，颜色较深
                            },
                            children: [
                                {
                                    name: '33564',
                                    value: 33564,
                                    itemStyle: {
                                        color: '#425195',//: '#006400' // 数值较大，颜色较深
                                    },
                                }
                            ]
                        },
                    ]
                },
                {
                    name: '2019',
                    itemStyle: {
                        color: '#f5f5f5',//: '#808080' // 灰色
                    },
                    children: [
                        {
                            name: '儿童伤亡',
                            value: 696,
                            children: [
                                {
                                    name: '696',
                                    value: 696
                                }
                            ]
                        },
                        {
                            name: '青少年伤亡',
                            value: 3130,
                            children: [
                                {
                                    name: '3130',
                                    value: 3130
                                }
                            ]
                        },
                        {
                            name: '警员殉职',
                            value: 367,
                            children: [
                                {
                                    name: '367',
                                    value: 367
                                }
                            ]
                        },
                        {
                            name: '嫌疑人被击毙',
                            value: 2085,
                            children: [
                                {
                                    name: '2085',
                                    value: 2085
                                }
                            ]
                        },
                        {
                            name: '意外伤亡',
                            value: 1912,
                            children: [
                                {
                                    name: '1912',
                                    value: 1912
                                }
                            ]
                        },
                        {
                            name: '其他因素',
                            value: 37528,
                            children: [
                                {
                                    name: '37528',
                                    value: 37528
                                }
                            ]
                        },
                    ]
                },
                {
                    name: '2020',
                    itemStyle: {
                        color: '#f5f5f5',//: '#FF0000' // 红色
                    },
                    children: [
                        {
                            name: '儿童伤亡',
                            value: 1002,
                            children: [
                                {
                                    name: '1002',
                                    value: 1002
                                }
                            ]
                        },
                        {
                            name: '青少年伤亡',
                            value: 4162,
                            children: [
                                {
                                    name: '4162',
                                    value: 4162
                                }
                            ]
                        },
                        {
                            name: '警员殉职',
                            value: 404,
                            children: [
                                {
                                    name: '404',
                                    value: 404
                                }
                            ]
                        },
                        {
                            name: '嫌疑人被击毙',
                            value: 2225,
                            children: [
                                {
                                    name: '2225',
                                    value: 2225
                                }
                            ]
                        },
                        {
                            name: '意外伤亡',
                            value: 2335,
                            children: [
                                {
                                    name: '2335',
                                    value: 2335
                                }
                            ]
                        },
                        {
                            name: '其他因素',
                            value: 48997,
                            children: [
                                {
                                    name: '48997',
                                    value: 48997
                                }
                            ]
                        },
                    ]
                },
                {
                    name: '2021',
                    itemStyle: {
                        color: '#f5f5f5',//: '#A52A2A' // 棕色
                    },
                    children: [
                        {
                            name: '儿童伤亡',
                            value: 1065,
                            children: [
                                {
                                    name: '1065',
                                    value: 1065
                                }
                            ]
                        },
                        {
                            name: '青少年伤亡',
                            value: 4653,
                            children: [
                                {
                                    name: '4653',
                                    value: 4653
                                }
                            ]
                        },
                        {
                            name: '警员殉职',
                            value: 441,
                            children: [
                                {
                                    name: '441',
                                    value: 441
                                }
                            ]
                        },
                        {
                            name: '嫌疑人被击毙',
                            value: 2223,
                            children: [
                                {
                                    name: '2223',
                                    value: 2223
                                }
                            ]
                        },
                        {
                            name: '意外伤亡',
                            value: 2030,
                            children: [
                                {
                                    name: '2030',
                                    value: 2030
                                }
                            ]
                        },
                        {
                            name: '其他因素',
                            value: 51228,
                            children: [
                                {
                                    name: '51228',
                                    value: 51228
                                }
                            ]
                        },
                    ]
                },
                {
                    name: '2022',
                    itemStyle: {
                        color: '#f5f5f5',//: '#00CED1' // 深天蓝色
                    },
                    children: [
                        {
                            name: '儿童伤亡',
                            value: 994,
                            children: [
                                {
                                    name: '994',
                                    value: 994
                                }
                            ]
                        },
                        {
                            name: '青少年伤亡',
                            value: 5176,
                            children: [
                                {
                                    name: '5176',
                                    value: 5176
                                }
                            ]
                        },
                        {
                            name: '警员殉职',
                            value: 412,
                            children: [
                                {
                                    name: '412',
                                    value: 412
                                }
                            ]
                        },
                        {
                            name: '嫌疑人被击毙',
                            value: 2274,
                            children: [
                                {
                                    name: '2274',
                                    value: 2274
                                }
                            ]
                        },
                        {
                            name: '意外伤亡',
                            value: 1627,
                            children: [
                                {
                                    name: '1627',
                                    value: 1627
                                }
                            ]
                        },
                        {
                            name: '其他因素',
                            value: 48375,
                            children: [
                                {
                                    name: '48375',
                                    value: 48375
                                }
                            ]
                        },
                    ],
                },
            ];
            option = {
                tooltip: {},
                series: {
                    type: 'sunburst',
                    data: data,
                    radius: [0, '95%'],
                    sort: undefined,
                    emphasis: {
                        focus: 'ancestor'
                    },
                    levels: [
                        {},
                        {
                            r0: '15%',
                            r: '35%',
                            itemStyle: {
                                borderWidth: 2
                            },
                            label: {
                                rotate: 'tangential',
                            }
                        },
                        {
                            r0: '35%',
                            r: '70%',
                            label: {
                                align: 'right',
                                show: false,
                            }
                        },
                        {
                            r0: '70%',
                            r: '70%',
                            label: {
                                position: 'outside',
                                padding: 3,
                                silent: false,
                                show: false,
                            },
                            itemStyle: {
                                borderWidth: 3
                            }
                        }
                    ]
                }
            };
            myChart.setOption(option);

            myChart.on('click', function (params) {
                if (params.depth === 1) { // 如果点击的是一年的节点
                    myChart.dispatchAction({
                        type: 'downplay', // 先将所有节点置为低亮状态，隐藏标签
                        seriesIndex: 0,
                    });
                    myChart.dispatchAction({
                        type: 'highlight', // 再将当前节点及其子节点置为高亮状态，显示标签
                        seriesIndex: 0,
                        dataIndex: params.dataIndex,
                    });
                } else { // 如果点击的不是一年的节点
                    myChart.dispatchAction({
                        type: 'downplay', // 将所有节点置为低亮状态，隐藏标签
                        seriesIndex: 0,
                    });
                }
            });


        </script>

</body>

</html>